/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */
import{a as y}from"./CFWASGFL.js";import{l as m,n as c,v as p,z as a}from"./GRRJSWZA.js";import{d}from"./4Q2DPEWF.js";import"./PWYHPWQ3.js";import"./73JLUGUM.js";import{J as h,c as o,e as l,f as u,w as r}from"./RVKGKVXB.js";var f=l`:host{display:flex}ul{margin:0;display:inline-flex;block-size:100%;align-items:center;padding:0}:host([layout=vertical]) ul{display:flex;inline-size:100%;flex-direction:column}:host([hidden]){display:none}[hidden]{display:none}`,n=class extends r{constructor(){super(),this.attributeWatch=o(["role"],this.handleGlobalAttributesChanged),this.menuItems=[],this.layout="horizontal",this.messages=y(),this.listen("calciteInternalMenuItemKeyEvent",this.calciteInternalNavMenuItemKeyEvent)}static{this.properties={label:1,layout:3,messageOverrides:0}}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}static{this.styles=f}async setFocus(){await d(this),c(this.menuItems[0])}willUpdate(t){t.has("layout")&&(this.hasUpdated||this.layout!=="horizontal")&&this.setMenuItemLayout(this.menuItems,this.layout)}handleGlobalAttributesChanged(){this.requestUpdate(),this.setMenuItemLayout(this.menuItems,this.layout)}calciteInternalNavMenuItemKeyEvent(t){let e=t.target,s=t.detail.children,i=t.detail.event.key;t.stopPropagation(),i==="ArrowDown"?e.layout==="vertical"?a(this.menuItems,e,"next",!1):t.detail.isSubmenuOpen&&s[0].setFocus():i==="ArrowUp"?this.layout==="vertical"?a(this.menuItems,e,"previous",!1):t.detail.isSubmenuOpen&&s[s.length-1].setFocus():i==="ArrowRight"?this.layout==="horizontal"?a(this.menuItems,e,"next",!1):t.detail.isSubmenuOpen&&s[0].setFocus():i==="ArrowLeft"?this.layout==="horizontal"?a(this.menuItems,e,"previous",!1):t.detail.isSubmenuOpen&&this.focusParentElement(t.target):i==="Escape"&&this.focusParentElement(t.target),t.preventDefault()}handleMenuSlotChange(t){this.menuItems=p(t),this.setMenuItemLayout(this.menuItems,this.layout)}focusParentElement(t){let e=t.parentElement;e&&(m(e),e.open=!1)}setMenuItemLayout(t,e){t.forEach(s=>{s.layout=e,this.getEffectiveRole()==="menubar"&&(s.isTopLevelItem=!0,s.topLevelMenuLayout=this.layout)})}getEffectiveRole(){return this.el.role||"menubar"}render(){return u`<ul .ariaLabel=${this.label} .role=${this.getEffectiveRole()}><slot @slotchange=${this.handleMenuSlotChange}></slot></ul>`}};h("calcite-menu",n);export{n as Menu};
